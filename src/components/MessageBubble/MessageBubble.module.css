/* src/components/MessageBubble/MessageBubble.module.css */

.bubbleContainer {
  display: flex;
  gap: 8px; /* Space between avatar and bubble content */
  max-width: 85%; /* Prevent bubbles from being too wide */
  align-items: flex-start; /* Align avatar with top of bubble */
}

.userContainer {
  justify-content: flex-end; /* Align user messages to the right */
  margin-left: auto; /* Push to the right */
}

.aiContainer {
  justify-content: flex-start; /* Align AI messages to the left */
  margin-right: auto; /* Push to the left */
}

/* Order avatar differently for user messages */
.userContainer .avatar {
  order: 2;
}
.userContainer .messageContent {
  order: 1;
  align-items: flex-end; /* Align timestamp/bubble content to the right */
}

.aiContainer .messageContent {
  align-items: flex-start; /* Align timestamp/bubble content to the left */
}

.messageContent {
  display: flex;
  flex-direction: column;
  flex-shrink: 1; /* Allow content to shrink if needed */
  min-width: 0; /* Important for flex shrinking calculation */
}

.bubble {
  padding: 8px 12px;
  border-radius: 12px;
  word-wrap: break-word; /* Break long words */
  overflow-wrap: break-word; /* Ensure content wraps */
  hyphens: auto; /* Optional: Allow hyphenation */
  position: relative; /* Needed if using pseudo-elements for tails */
  font-size: 0.95rem;
  max-width: 100%; /* Ensure bubble does not exceed its flex container */
}

.userBubble {
  background-color: #007bff; /* Example user bubble color */
  color: white;
  border-bottom-right-radius: 4px; /* Slightly point towards user avatar */
}

.aiBubble {
  background-color: #ffffff; /* Example AI bubble color */
  color: #333;
  border: 1px solid #e8e8e8;
  border-bottom-left-radius: 4px; /* Slightly point towards AI avatar */
}

.inlineThumbnail {
  display: block; /* Make image a block element */
  max-width: 100%; /* Don't exceed bubble width */
  max-height: 150px; /* Limit height */
  border-radius: 8px;
  margin-bottom: 8px; /* Space between image and text */
  cursor: pointer;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.loadingContainer {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 20px; /* Ensure spinner has some space */
  padding: 5px 0;
}

.errorAlert {
  font-size: 0.9em; /* Make alert slightly smaller */
  padding: 8px 12px !important; /* Override AntD padding if needed */
}

/* Specificity bump for error alert text wrapping */
.errorAlert :global(.ant-alert-description) {
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal; /* Ensure text wraps */
}

.timestamp {
  font-size: 0.75em;
  color: #888;
  margin-top: 4px;
  padding: 0 5px; /* Give timestamp slight horizontal padding */
}

/* Styles for Markdown content */
.markdownContent {
  display: flex;
  flex-direction: column;
  gap: 0.5em; /* Space between markdown elements like paragraphs */
  overflow-wrap: break-word;
  word-wrap: break-word;
  white-space: pre-wrap; /* Preserve whitespace and wrap text */
}

.markdownContent > *:first-child {
  margin-top: 0; /* Remove margin from first element */
}

.markdownContent > *:last-child {
  margin-bottom: 0; /* Remove margin from last element */
}

/* Style inline code differently from code blocks */
.inlineCode {
  background-color: rgba(135, 131, 120, 0.15);
  color: #eb5757; /* Example color for inline code */
  padding: 0.1em 0.3em;
  border-radius: 4px;
  font-size: 0.9em;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
    monospace;
}

/* Style links within user messages */
.userBubble .markdownLink {
  color: #add8e6; /* Lighter blue for links on dark background */
  text-decoration: underline;
}
.userBubble .markdownLink:hover {
  color: #ffffff;
}

/* Style links within AI messages */
.aiBubble .markdownLink {
  color: #0056b3; /* Standard link color */
  text-decoration: underline;
}
.aiBubble .markdownLink:hover {
  color: #003f7e;
}

.markdownParagraph {
  margin: 0; /* Reset paragraph margins from browser defaults */
}

/* Code blocks are handled by CustomCodeBlock, but ensure container allows overflow */
.markdownContent :global(pre) {
  /* Target pre tag generated by highlighter perhaps */
  overflow-x: auto;
  max-width: 100%;
}
